# FSGS v4+ å®éªŒæ‰§è¡Œæ£€æŸ¥æ¸…å•

**åˆ›å»ºæ—¶é—´ï¼š** 2025-11-18
**ç”¨é€”ï¼š** ç¡®ä¿å®éªŒé¡ºåˆ©æ‰§è¡Œï¼Œé¿å…é—æ¼å…³é”®æ­¥éª¤

---

## âœ… æ‰§è¡Œå‰æ£€æŸ¥ï¼ˆå¿…é¡»å®Œæˆï¼‰

### 1. ç”¨æˆ·å†³ç­–ç¡®è®¤
- [ ] **Q1ï¼šæ‰¹å‡†é˜¶æ®µ 1 çš„ 8 ä¸ªå®éªŒï¼Ÿ**
  - æˆ‘çš„é€‰æ‹©ï¼š____________ï¼ˆA/B/Cï¼‰
  - æ‰¹å‡†æ—¶é—´ï¼š____________

- [ ] **Q2ï¼šå®éªŒæ‰§è¡Œæ–¹å¼ï¼Ÿ**
  - æˆ‘çš„é€‰æ‹©ï¼š____________ï¼ˆAï¼šå• GPU / Bï¼šå¤š GPU / Cï¼šæ‰‹åŠ¨ï¼‰
  - GPU æ•°é‡ï¼š____________ï¼ˆå¦‚é€‰æ‹© Bï¼‰

- [ ] **Q3ï¼šmatplotlib bug ä¿®å¤ï¼Ÿ**
  - æˆ‘çš„é€‰æ‹©ï¼š____________ï¼ˆAï¼šéœ€ä¿®å¤ / Bï¼šå·²ä¿®å¤ / Cï¼šè·³è¿‡ï¼‰
  - ä¿®å¤ commitï¼š____________ï¼ˆå¦‚é€‰æ‹© Bï¼‰

- [ ] **Q4ï¼šEarly Stopping ç­–ç•¥ï¼Ÿ**
  - æˆ‘çš„é€‰æ‹©ï¼š____________ï¼ˆAï¼šå¯ç”¨ / Bï¼šç¦ç”¨ï¼‰

- [ ] **Q5ï¼šå¤±è´¥åº”å¯¹æ–¹æ¡ˆï¼Ÿ**
  - æˆ‘çš„é€‰æ‹©ï¼š____________ï¼ˆA/B/Cï¼‰

---

### 2. ç¯å¢ƒæ£€æŸ¥
- [ ] CUDA ç¯å¢ƒæ¿€æ´»ï¼š`conda activate r2_gaussian_new`
  ```bash
  conda info --envs | grep r2_gaussian_new
  # åº”æ˜¾ç¤º * æ ‡è®°è¡¨ç¤ºå·²æ¿€æ´»
  ```

- [ ] GPU å¯ç”¨æ€§æ£€æŸ¥ï¼š
  ```bash
  nvidia-smi
  # ç¡®è®¤æœ‰è¶³å¤Ÿçš„ GPU æ˜¾å­˜ï¼ˆè‡³å°‘ 12 GB/å®éªŒï¼‰
  ```

- [ ] Python/PyTorch ç‰ˆæœ¬è®°å½•ï¼š
  ```bash
  python --version
  python -c "import torch; print(torch.__version__)"
  nvcc --version
  # è®°å½•ç‰ˆæœ¬å·åˆ° v4_results_summary.md
  ```

- [ ] Git çŠ¶æ€æ¸…æ´ï¼ˆå¯é€‰ä½†æ¨èï¼‰ï¼š
  ```bash
  git status
  # ç¡®ä¿æ— æœªæäº¤çš„å…³é”®ä¿®æ”¹
  ```

---

### 3. ä»£ç ä¿®å¤æ£€æŸ¥ï¼ˆä»…å½“ Q3 é€‰æ‹© Aï¼‰
- [ ] å®šä½ matplotlib bug æ–‡ä»¶ï¼š
  ```bash
  vim /home/qyhu/Documents/r2_ours/r2_gaussian/r2_gaussian/utils/plot_utils.py
  # è·³è½¬åˆ° line 271-274
  ```

- [ ] ä¿®å¤æ–¹å¼ï¼ˆåœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ï¼Œåˆ é™¤å‡½æ•°å†…ä»£ç ï¼‰ï¼š
  ```python
  # æ–‡ä»¶å¼€å¤´ï¼ˆåœ¨æ‰€æœ‰ import ä¹‹å‰ï¼‰æ·»åŠ ï¼š
  import matplotlib
  matplotlib.use("Agg")
  import matplotlib.pyplot as plt

  # åˆ é™¤ show_two_slice å‡½æ•°å†…çš„ line 271-274
  ```

- [ ] éªŒè¯ä¿®å¤ï¼š
  ```bash
  python -c "from r2_gaussian.utils.plot_utils import show_two_slice; print('OK')"
  # åº”è¾“å‡º OKï¼Œæ— æŠ¥é”™
  ```

- [ ] Git æäº¤ä¿®å¤ï¼š
  ```bash
  git add r2_gaussian/utils/plot_utils.py
  git commit -m "Fix: matplotlib backend deadlock in plot_utils.py"
  git log -1 --oneline  # è®°å½• commit hash
  ```

---

### 4. é…ç½®æ–‡ä»¶ç”Ÿæˆ
- [ ] æ‰§è¡Œç”Ÿæˆè„šæœ¬ï¼š
  ```bash
  cd /home/qyhu/Documents/r2_ours/r2_gaussian
  python cc-agent/experiments/scripts/generate_v4_configs.py
  ```

- [ ] éªŒè¯è¾“å‡ºï¼š
  ```bash
  ls -lh cc-agent/experiments/configs/
  # åº”æ˜¾ç¤º 8 ä¸ª .yml æ–‡ä»¶ï¼ˆv4_tv_0.10.yml ~ v4_cap_180k.ymlï¼‰
  ```

- [ ] æ£€æŸ¥ç”Ÿæˆçš„æ‰§è¡Œè„šæœ¬ï¼š
  ```bash
  ls -lh cc-agent/experiments/scripts/run_v4_*.sh
  # åº”æ˜¾ç¤º run_v4_sequential.sh å’Œ run_v4_parallel.sh
  ```

---

### 5. ç£ç›˜ç©ºé—´æ£€æŸ¥
- [ ] ç¡®è®¤æœ‰è¶³å¤Ÿç©ºé—´ï¼ˆè‡³å°‘ 50 GBï¼‰ï¼š
  ```bash
  df -h /home/qyhu/Documents/r2_ours/r2_gaussian/output
  # æ£€æŸ¥ Available åˆ—
  ```

---

## ğŸš€ å®éªŒæ‰§è¡Œé˜¶æ®µ

### æ–¹å¼ Aï¼šå• GPU é¡ºåºæ‰§è¡Œï¼ˆ32 å°æ—¶ï¼‰
```bash
cd /home/qyhu/Documents/r2_ours/r2_gaussian
bash cc-agent/experiments/scripts/run_v4_sequential.sh
```

**æ‰§è¡Œä¸­ç›‘æ§ï¼š**
- [ ] å®šæœŸæ£€æŸ¥ GPU ä½¿ç”¨ç‡ï¼š`nvidia-smi`
- [ ] æ£€æŸ¥æ—¥å¿—è¾“å‡ºï¼š`tail -f output/2025_11_19_foot_3views_fsgs_v4_tv_0.10_train.log`
- [ ] ç›‘æ§ç£ç›˜ç©ºé—´ï¼š`df -h output/`

---

### æ–¹å¼ Bï¼šå¤š GPU å¹¶è¡Œæ‰§è¡Œï¼ˆ8-16 å°æ—¶ï¼‰
```bash
cd /home/qyhu/Documents/r2_ours/r2_gaussian
bash cc-agent/experiments/scripts/run_v4_parallel.sh
```

**æ‰§è¡Œä¸­ç›‘æ§ï¼š**
- [ ] æ£€æŸ¥æ‰€æœ‰ GPUï¼š`watch -n 5 nvidia-smi`
- [ ] ç›‘æ§è¿›ç¨‹çŠ¶æ€ï¼š`ps aux | grep train.py`
- [ ] æ£€æŸ¥æ¯ä¸ªå®éªŒçš„æ—¥å¿—

---

### æ–¹å¼ Cï¼šæ‰‹åŠ¨é€ä¸ªæ‰§è¡Œ
**å®éªŒé¡ºåºï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰ï¼š**
1. [ ] v4_tv_0.10ï¼ˆP1ï¼Œæ­£åˆ™åŒ–ï¼‰
2. [ ] v4_tv_0.12ï¼ˆP1ï¼Œæ­£åˆ™åŒ–ï¼‰
3. [ ] v4_k_5ï¼ˆP2ï¼ŒåŒ»å­¦çº¦æŸï¼‰
4. [ ] v4_tau_7.0ï¼ˆP2ï¼ŒåŒ»å­¦çº¦æŸï¼‰
5. [ ] v4_densify_10kï¼ˆP3ï¼Œå¯†é›†åŒ–ï¼‰
6. [ ] v4_grad_3e-4ï¼ˆP3ï¼Œå¯†é›†åŒ–ï¼‰
7. [ ] v4_dssim_0.30ï¼ˆP4ï¼Œè¾…åŠ©ï¼‰
8. [ ] v4_cap_180kï¼ˆP4ï¼Œè¾…åŠ©ï¼‰

**æ¯ä¸ªå®éªŒæ‰§è¡Œå‘½ä»¤ï¼š**
```bash
python train.py --config cc-agent/experiments/configs/v4_tv_0.10.yml
# ç­‰å¾…å®Œæˆåå†æ‰§è¡Œä¸‹ä¸€ä¸ª
```

---

## ğŸ“Š å®éªŒå®Œæˆåæ£€æŸ¥

### æ¯ä¸ªå®éªŒå®Œæˆæ—¶
- [ ] æ£€æŸ¥è¯„ä¼°ç»“æœæ–‡ä»¶æ˜¯å¦ç”Ÿæˆï¼š
  ```bash
  ls output/2025_11_19_foot_3views_fsgs_<exp_id>/eval/iter_030000/eval2d_render_test.yml
  ```

- [ ] å¿«é€ŸæŸ¥çœ‹æµ‹è¯• PSNRï¼š
  ```bash
  grep "psnr_2d:" output/2025_11_19_foot_3views_fsgs_<exp_id>/eval/iter_030000/eval2d_render_test.yml
  ```

- [ ] è®°å½•åˆ°è¿›åº¦è¡¨ï¼ˆå¯é€‰ï¼‰ï¼š
  ```bash
  echo "<exp_id>: PSNR <value>" >> cc-agent/experiments/v4_progress.txt
  ```

---

### é˜¶æ®µ 1 å…¨éƒ¨å®Œæˆå
- [ ] è¿è¡Œç»“æœæ±‡æ€»è„šæœ¬ï¼š
  ```bash
  python cc-agent/experiments/scripts/summarize_v4_results.py
  ```

- [ ] æ£€æŸ¥æ±‡æ€»æŠ¥å‘Šï¼š
  ```bash
  cat cc-agent/experiments/v4_results_summary.md
  ```

- [ ] è¯†åˆ«æœ€ä½³é…ç½®ï¼š
  - æœ€ä½³ PSNRï¼š____________ï¼ˆå®éªŒ ID + æ•°å€¼ï¼‰
  - æœ€ä½³ SSIMï¼š____________
  - æœ€å°æ³›åŒ–å·®è·ï¼š____________

- [ ] æˆåŠŸç­‰çº§ç»Ÿè®¡ï¼š
  - S çº§ï¼ˆé‡å¤§çªç ´ï¼‰ï¼š______ ä¸ª
  - A çº§ï¼ˆæ˜¾è‘—æ”¹è¿›ï¼‰ï¼š______ ä¸ª
  - B çº§ï¼ˆè¾¹é™…æ”¹è¿›ï¼‰ï¼š______ ä¸ª
  - C çº§ï¼ˆæŒå¹³ï¼‰ï¼š______ ä¸ª
  - å¤±è´¥ï¼š______ ä¸ª

---

## ğŸ¯ é˜¶æ®µ 2 å‡†å¤‡ï¼ˆå¦‚æœé˜¶æ®µ 1 æˆåŠŸï¼‰

### åŸºäºæ±‡æ€»æŠ¥å‘Šè®¾è®¡é˜¶æ®µ 2
- [ ] é€‰æ‹©æœ€ä½³ 2-3 ä¸ªå®éªŒçš„å‚æ•°ç»„åˆ
- [ ] è®¾è®¡ç»„åˆå®éªŒé…ç½®ï¼ˆå‚è€ƒ v4_results_summary.md å»ºè®®ï¼‰
- [ ] ç”Ÿæˆé˜¶æ®µ 2 é…ç½®æ–‡ä»¶
- [ ] ç­‰å¾…ç”¨æˆ·æ‰¹å‡†é˜¶æ®µ 2 æ–¹æ¡ˆ

**ç»„åˆå®éªŒè®°å½•ï¼š**
- ç»„åˆ 1ï¼š____________ + ____________
- ç»„åˆ 2ï¼š____________ + ____________
- ç»„åˆ 3ï¼ˆå¯é€‰ï¼‰ï¼š____________ + ____________

---

## âš ï¸ å¼‚å¸¸å¤„ç†

### å®éªŒå¡æ­»ï¼ˆfutex æ­»é”ï¼‰
- [ ] æ£€æŸ¥è¿›ç¨‹çŠ¶æ€ï¼š
  ```bash
  ps aux | grep train.py
  cat /proc/<PID>/status | grep State
  ```

- [ ] å¦‚æœ State=S (sleeping) ä¸” CPU 0%ï¼Œè¶…è¿‡ 30 åˆ†é’Ÿï¼š
  ```bash
  kill -9 <PID>
  # æ£€æŸ¥ matplotlib bug æ˜¯å¦å·²ä¿®å¤
  ```

---

### æ˜¾å­˜ä¸è¶³ï¼ˆOOMï¼‰
- [ ] æ£€æŸ¥ GPU æ˜¾å­˜ï¼š
  ```bash
  nvidia-smi
  ```

- [ ] å¦‚æœæ˜¾å­˜ä¸è¶³ï¼š
  - å‡å°‘ `max_num_gaussians`ï¼ˆå¦‚ 180k â†’ 150kï¼‰
  - æˆ–ç­‰å¾…å…¶ä»–å®éªŒå®Œæˆåå†è¿è¡Œ

---

### è¯„ä¼°ç»“æœç¼ºå¤±
- [ ] æ£€æŸ¥è®­ç»ƒæ—¥å¿—æœ€åå‡ è¡Œï¼š
  ```bash
  tail -50 output/<exp_name>_train.log
  ```

- [ ] å¦‚æœè®­ç»ƒæå‰ç»ˆæ­¢ï¼Œæ£€æŸ¥é”™è¯¯ä¿¡æ¯
- [ ] å¿…è¦æ—¶é‡æ–°è¿è¡Œè¯¥å®éªŒ

---

## ğŸ“‹ æœ€ç»ˆäº¤ä»˜æ¸…å•

### é˜¶æ®µ 1 å®Œæˆæ—¶åº”æäº¤
- [ ] 8 ä¸ªå®éªŒçš„é…ç½®æ–‡ä»¶ï¼ˆ`cc-agent/experiments/configs/*.yml`ï¼‰
- [ ] ç»“æœæ±‡æ€»æŠ¥å‘Šï¼ˆ`cc-agent/experiments/v4_results_summary.md`ï¼‰
- [ ] æ›´æ–° `cc-agent/experiments/record.md`ï¼ˆæ ‡è®°é˜¶æ®µ 1 å®Œæˆï¼‰
- [ ] æ›´æ–° `cc-agent/records/progress.md`ï¼ˆæ·»åŠ é˜¶æ®µ 1 ç»“è®ºï¼‰
- [ ] Git commit + tagï¼š
  ```bash
  git tag -a exp-v4-phase1-complete -m "FSGS v4+ é˜¶æ®µ 1 å®éªŒå®Œæˆ"
  git push origin exp-v4-phase1-complete
  ```

---

## ğŸ“ é‡åˆ°é—®é¢˜æ—¶è”ç³»

- **matplotlib æ­»é”ï¼š** è”ç³»ç¼–ç¨‹ä¸“å®¶ä¿®å¤
- **å‚æ•°è°ƒæ•´å»ºè®®ï¼š** è°ƒå‚ä¸“å®¶ï¼ˆæœ¬ä¸“å®¶ï¼‰
- **å®éªŒè®¾è®¡é—®é¢˜ï¼š** 3DGS ä¸“å®¶
- **åŒ»å­¦çº¦æŸé—®é¢˜ï¼š** åŒ»å­¦æˆåƒä¸“å®¶

---

**âœ… æ‰§è¡Œå‰æœ€åç¡®è®¤ï¼š**

æˆ‘å·²å®Œæˆä»¥ä¸Šæ‰€æœ‰æ£€æŸ¥ï¼Œå‡†å¤‡æ‰§è¡Œå®éªŒã€‚

- æ‰§è¡Œæ–¹å¼ï¼š____________ï¼ˆå• GPU / å¤š GPU / æ‰‹åŠ¨ï¼‰
- é¢„è®¡å®Œæˆæ—¶é—´ï¼š____________ï¼ˆæ—¥æœŸ + æ—¶é—´ï¼‰
- è´Ÿè´£äººç­¾åï¼š____________

**å¼€å§‹æ—¶é—´ï¼š** ____________
**å®Œæˆæ—¶é—´ï¼š** ____________ï¼ˆé˜¶æ®µ 1ï¼‰

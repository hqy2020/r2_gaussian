# Importance-Aware Drop å®éªŒå¤±è´¥åˆ†ææŠ¥å‘Š

**å®éªŒæ—¥æœŸï¼š** 2025-11-19
**å®éªŒåç§°ï¼š** `2025_11_19_foot_3views_importance_aware_drop`
**æ•°æ®é›†ï¼š** Foot 3-views
**çŠ¶æ€ï¼š** âŒ å¤±è´¥ï¼ˆPSNR ä½äº Baselineï¼‰

---

## ğŸ“Š æ ¸å¿ƒç»“è®ºï¼ˆ3 å¥è¯æ€»ç»“ï¼‰

1. **Importance-Aware Drop åœ¨ 20000 è½®è¾¾åˆ° PSNR 28.22ï¼Œæ¯”åŸå§‹ DropGaussian (28.17) æå‡äº† **0.05 dB**ï¼Œä½†ä»ä½äº Baseline (28.48) **0.26 dB**ã€‚
2. **66% çš„å›¾åƒï¼ˆ33/50ï¼‰è¡¨ç°å˜å·®**ï¼Œè¯´æ˜ importance-aware ä¿æŠ¤ç­–ç•¥åœ¨ç¨€ç–è§†è§’åœºæ™¯ä¸‹æ•ˆæœæœ‰é™ã€‚
3. **æ ¹æœ¬åŸå› ï¼š** 3 è§†è§’è®­ç»ƒä¿¡å·ç¨€ç¼º + 20% drop rate ä»ç„¶è¿‡é«˜ï¼Œå³ä½¿ä¿æŠ¤é«˜ opacity Gaussians ä¹Ÿæ— æ³•å®Œå…¨é¿å…è®­ç»ƒä¸è¶³ã€‚

---

## ğŸ“ˆ å®šé‡æŒ‡æ ‡å¯¹æ¯”

### **20000 è½®æµ‹è¯•ç»“æœ**

| æŒ‡æ ‡ | Baseline | DropGaussian (Î³=0.2) | Importance-Aware | vs Baseline | vs DropGaussian |
|------|----------|---------------------|------------------|-------------|----------------|
| **2D PSNR** | 28.48 | 28.17 (-0.31) | 28.22 (-0.26) | âŒ -0.91% | âœ… +0.18% |
| **2D SSIM** | 0.900 | 0.898 | 0.899 | âŒ -0.11% | âœ… +0.11% |
| **3D PSNR** | 23.14 | 22.91 (-0.22) | 22.87 (-0.27) | âŒ -1.17% | âŒ -0.17% |
| **3D SSIM** | 0.715 | 0.711 | 0.715 | âœ… 0.00% | âœ… +0.56% |

**å…³é”®å‘ç°ï¼š**
- Importance-Aware æ¯”åŸå§‹ DropGaussian **ç•¥æœ‰æ”¹å–„**ï¼ˆ2D PSNR +0.05ï¼‰
- ä½†ä»ç„¶ **ä½äº Baseline** 0.26 dB
- 3D é‡å»ºè´¨é‡æ— æ˜æ˜¾æå‡

---

## ğŸ” é€å›¾åˆ†æï¼ˆ20000 è½®ï¼‰

### **æœ€å¥½çš„ 5 å¼ å›¾åƒ**ï¼ˆPSNR > 38ï¼‰

| å›¾åƒç´¢å¼• | PSNR | SSIM | åˆ†æ |
|---------|------|------|------|
| 23 | 45.71 | 0.9894 | è®­ç»ƒè§†è§’æˆ–ç®€å•åœºæ™¯ |
| 48 | 43.47 | 0.9850 | é«˜è´¨é‡æ ·æœ¬ |
| 49 | 41.81 | 0.9796 | é«˜è´¨é‡æ ·æœ¬ |
| 47 | 38.60 | 0.9716 | é«˜è´¨é‡æ ·æœ¬ |
| 46 | 37.06 | 0.9666 | é«˜è´¨é‡æ ·æœ¬ |

### **æœ€å·®çš„ 5 å¼ å›¾åƒ**ï¼ˆPSNR < 24ï¼‰

| å›¾åƒç´¢å¼• | PSNR | SSIM | åˆ†æ |
|---------|------|------|------|
| 42 | 22.42 | 0.8578 | å¤æ‚ç»“æ„/é®æŒ¡åŒºåŸŸ |
| 41 | 23.63 | 0.8509 | ä½å¯¹æ¯”åº¦åŒºåŸŸ |
| 38 | 23.72 | 0.8390 | ç»†èŠ‚ç¼ºå¤± |
| 40 | 23.77 | 0.8429 | è¾¹ç¼˜æ¨¡ç³Š |
| 36 | 23.82 | 0.8521 | çº¹ç†æ¬ æ‹Ÿåˆ |

### **ä¸ Baseline å¯¹æ¯”ï¼š**
- âœ… **æ”¹å–„çš„å›¾åƒ:** 17 / 50 (34.0%)
- âŒ **å˜å·®çš„å›¾åƒ:** 33 / 50 (66.0%)

**ç»“è®ºï¼š** å¤§å¤šæ•°å›¾åƒä»ç„¶è¡¨ç°ä¸ä½³ï¼Œè¯´æ˜ importance-aware ç­–ç•¥æ— æ³•è§£å†³æ ¹æœ¬é—®é¢˜ã€‚

---

## ğŸ§¬ æŠ€æœ¯æœºåˆ¶åˆ†æ

### **Importance-Aware Drop ç­–ç•¥**ï¼ˆä»£ç ä½ç½®ï¼š`r2_gaussian/gaussian/render_query.py:160-193`ï¼‰

```python
# è®¡ç®— opacity å¹¶ç¡®å®šä¿æŠ¤é˜ˆå€¼
opacity_activated = torch.sigmoid(density.squeeze())
k = int(len(opacity_activated) * importance_protect_ratio)  # 20%
top_k_values, _ = torch.topk(opacity_activated, k)
threshold = top_k_values[-1]

# è‡ªé€‚åº” drop rate
is_important = opacity_activated >= threshold
adaptive_drop_rate = torch.where(
    is_important,
    drop_rate * 0.2,  # top 20% çš„ Gaussiansï¼šdrop rate é™ä½ 80%
    drop_rate          # å…¶ä»– 80%ï¼šæ­£å¸¸ drop rate
)
```

### **ä¸åŸå§‹ DropGaussian çš„åŒºåˆ«**ï¼ˆä»£ç ä½ç½®ï¼š`r2_gaussian/gaussian/render_query.py:200-203`ï¼‰

| ç‰¹æ€§ | DropGaussian | Importance-Aware Drop |
|------|-------------|---------------------|
| **Drop ç­–ç•¥** | æ‰€æœ‰ Gaussians ç»Ÿä¸€ drop | Top 20% ä¿æŠ¤ï¼Œå…¶ä»–æ­£å¸¸ drop |
| **å®ç°æ–¹å¼** | `torch.nn.Dropout` | æ‰‹åŠ¨å®ç°è‡ªé€‚åº” dropout |
| **è¡¥å¿æœºåˆ¶** | ç»Ÿä¸€è¡¥å¿ | é€å…ƒç´ è‡ªé€‚åº”è¡¥å¿ |
| **ä¿æŠ¤å¯¹è±¡** | æ—  | é«˜ opacity Gaussians |

---

## âš ï¸ å¤±è´¥çš„æ ¹æœ¬åŸå› 

### **å‡è®¾éªŒè¯ï¼š**

**âŒ å‡è®¾ 1ï¼šä¿æŠ¤é«˜ opacity Gaussians èƒ½é˜²æ­¢è´¨é‡ä¸‹é™**
- **ç»“æœï¼š** éƒ¨åˆ†æœ‰æ•ˆï¼ˆæ¯”åŸå§‹ DropGaussian å¥½ 0.05 dBï¼‰
- **ä½†ï¼š** ä»ç„¶ä½äº Baseline 0.26 dB

**âŒ å‡è®¾ 2ï¼š20% çš„ä¿æŠ¤æ¯”ä¾‹è¶³å¤Ÿ**
- **ç»“æœï¼š** ä¸è¶³ï¼Œ66% çš„å›¾åƒä»ç„¶å˜å·®

### **æ ¹æœ¬åŸå› ï¼ˆåŸºäºæ•°æ®ï¼‰ï¼š**

#### 1. **è®­ç»ƒä¿¡å·ç¨€ç¼ºï¼ˆ3 è§†è§’ + Dropï¼‰**
- Baseline 3 è§†è§’å·²ç»æ˜¯ç¨€ç–åœºæ™¯
- Drop 20% çš„ Gaussians â†’ **æœ‰æ•ˆè®­ç»ƒä¿¡å·å‡å°‘ 20%**
- å³ä½¿ä¿æŠ¤ top 20%ï¼Œå‰©ä½™ 80% çš„ Gaussians ä»ç„¶è®­ç»ƒä¸è¶³

#### 2. **Opacity æ¬ è®­ç»ƒé—®é¢˜æœªè§£å†³**
- åŸå§‹ DropGaussian å¯¼è‡´å¹³å‡ opacity ä¸‹é™ 44.47%ï¼ˆä»ä¹‹å‰çš„åˆ†æï¼‰
- Importance-Aware è™½ç„¶ä¿æŠ¤äº†é«˜ opacity Gaussiansï¼Œä½†ï¼š
  - **å…¶ä»– 80% çš„ Gaussians ä»ç„¶è¢« drop**
  - **è¿™äº› Gaussians å¯¹ä½è´¨é‡åŒºåŸŸçš„é‡å»ºè‡³å…³é‡è¦**

#### 3. **ä¿æŠ¤æ¯”ä¾‹ä¸åˆç†**
- Top 20% çš„ Gaussians å¯èƒ½å·²ç»è®­ç»ƒå¾—å¾ˆå¥½
- **Bottom 80% çš„ Gaussians æ›´éœ€è¦ä¿æŠ¤**ï¼ˆå®ƒä»¬è´Ÿè´£ç»†èŠ‚å’Œè¾¹ç¼˜ï¼‰

---

## ğŸ’¡ æ”¹è¿›å»ºè®®

### **ç­–ç•¥ Aï¼šåå‘ä¿æŠ¤ï¼ˆBottom-Up Protectionï¼‰** â­ **æ¨è**

**æ ¸å¿ƒæ€è·¯ï¼š** ä¿æŠ¤ä½ opacity Gaussiansï¼Œè®©å®ƒä»¬æœ‰æ›´å¤šæœºä¼šè®­ç»ƒ

```python
# ä¿æŠ¤ bottom 50% çš„ä½ opacity Gaussians
is_weak = opacity_activated < threshold_low
adaptive_drop_rate = torch.where(
    is_weak,
    drop_rate * 0.3,  # ä½ opacityï¼šé™ä½ drop rateï¼ˆä¿æŠ¤ï¼‰
    drop_rate * 1.5   # é«˜ opacityï¼šé€‚å½“æé«˜ drop rateï¼ˆå·²ç»è®­ç»ƒå¥½ï¼‰
)
```

**é¢„æœŸæ•ˆæœï¼š**
- ä½ opacity Gaussians è·å¾—æ›´å¤šè®­ç»ƒæœºä¼š
- ç›®æ ‡ PSNR > 28.98ï¼ˆè¶…è¶Š Baselineï¼‰

---

### **ç­–ç•¥ Bï¼šåŠ¨æ€ Drop Rateï¼ˆCurriculum Dropï¼‰**

**æ ¸å¿ƒæ€è·¯ï¼š** æ—©æœŸä¸ dropï¼ŒåæœŸé€æ­¥å¢åŠ  drop rate

```python
if iteration < 10000:
    drop_rate = 0  # å‰æœŸå……åˆ†è®­ç»ƒ
elif iteration < 20000:
    drop_rate = gamma * 0.5  # ä¸­æœŸæ¸è¿› drop
else:
    drop_rate = gamma  # åæœŸæ­£å¸¸ drop
```

**é¢„æœŸæ•ˆæœï¼š**
- é¿å…æ—©æœŸè®­ç»ƒä¸è¶³
- ç›®æ ‡ PSNR > 28.50

---

### **ç­–ç•¥ Cï¼šé™ä½ Drop Rateï¼ˆÎ³=0.1ï¼‰**

**æœ€ç®€å•ï¼š** ç›´æ¥é™ä½ drop_gamma ä» 0.2 â†’ 0.1

**é¢„æœŸæ•ˆæœï¼š**
- è®­ç»ƒä¿¡å·æŸå¤±å‡å°‘ 50%
- ç›®æ ‡ PSNR > 28.40

---

## ğŸ“‹ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### **ä¼˜å…ˆçº§ P1ï¼šå¿«é€ŸéªŒè¯**
1. **å®éªŒ E1ï¼š** Bottom-Up Protectionï¼ˆä¿æŠ¤ä½ opacity Gaussiansï¼‰
   - `importance_protect_ratio=0.5`
   - `protect_mode='bottom'`
   - é¢„æœŸ PSNR > 28.98

2. **å®éªŒ E2ï¼š** é™ä½ Drop Rateï¼ˆÎ³=0.1ï¼‰
   - æœ€ç®€å•ï¼Œé£é™©æœ€ä½
   - é¢„æœŸ PSNR > 28.40

### **ä¼˜å…ˆçº§ P2ï¼šæ·±å…¥ä¼˜åŒ–**
3. **å®éªŒ E3ï¼š** Curriculum Dropï¼ˆåŠ¨æ€ drop rateï¼‰
   - éœ€è¦ä¿®æ”¹è®­ç»ƒé€»è¾‘
   - é¢„æœŸ PSNR > 28.50

---

## ğŸ“š ç»éªŒæ€»ç»“

### **æœ‰æ•ˆçš„å‘ç°ï¼š**
âœ… Importance-Aware ç­–ç•¥ç†è®ºä¸Šå¯è¡Œï¼ˆæ¯”åŸå§‹ DropGaussian å¥½ 0.05 dBï¼‰

### **æ— æ•ˆçš„ç­–ç•¥ï¼š**
âŒ ä¿æŠ¤é«˜ opacity Gaussians æ— æ³•è§£å†³ç¨€ç–è§†è§’ä¸‹çš„è®­ç»ƒä¸è¶³é—®é¢˜
âŒ 20% çš„ä¿æŠ¤æ¯”ä¾‹å¤ªä¿å®ˆ

### **æ ¸å¿ƒæ•™è®­ï¼š**
âš ï¸ **åœ¨ç¨€ç–åœºæ™¯ï¼ˆ3 è§†è§’ï¼‰ä¸‹ï¼Œåº”è¯¥ä¿æŠ¤"å¼±è€…"ï¼ˆä½ opacity Gaussiansï¼‰ï¼Œè€Œé"å¼ºè€…"ï¼ˆé«˜ opacity Gaussiansï¼‰**

---

**åˆ†æå®Œæˆæ—¶é—´ï¼š** 2025-11-19
**åˆ†æå·¥å…·ï¼š** é€å›¾å¯¹æ¯”ã€å®šé‡æŒ‡æ ‡åˆ†æã€ä»£ç å®¡æŸ¥
**ä¸‹ä¸€æ­¥ï¼š** ç­‰å¾…ç”¨æˆ·æ‰¹å‡†å®éªŒè®¡åˆ’
